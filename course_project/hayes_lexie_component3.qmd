---
title: "hayes_lexie_component3"
format: html
---

### 1. Setup

```{python}
# packages used

import pandas as pd
import matplotlib.pyplot as plt
from wordcloud import WordCloud
```

```{python}
df = pd.read_csv("hayes_lexie_component2.csv", encoding="utf-8", index_col=0)

# confirming it read properly:
df.head()

print(df.shape)
print(df.columns)
```

### 2. Planning Analysis

For this analysis, I’m looking at pronoun use and word structure across Djo’s four songs, "Delete Ya", "Half Life", "Personal Lies", and "Purgatory Silverstar", each from different albums. I plan to sort pronouns into first, second, and third person to see how perspective shifts and which voices stand out. I’ll also look at word length, number of vowels, and vowel-to-letter ratios to get a sense of lyrical style and rhythm. I expect first-person pronouns like “I” and “me” to dominate, with some “you” and “she” showing up, and I think songs with more narrative content will use longer, vowel-heavy words, whereas punchier songs will stick to shorter words.

### 3. Analyzing the Data

#### Pronoun Analysis:

```{python}
first_person = {'i', "i'm", "i've", "i'll", "i'd", 'me', 'my', 'mine', 'myself', 'we', "we're", "we've", "we'll", "we'd", 'us', 'our', 'ours', 'ourselves'}
second_person = {'you', 'ya', "you're", "you've", "you'll", "you'd", 'your', 'yours', 'yourself', 'yourselves'}
third_person = {'he', "he's", "he'll", "he'd", 'him', 'himself', 'she', "she's", "she'll", "she'd", 'her', 'hers', 'herself', 'they', "they're", "they've", "they'll", "they'd", 'them', 'theirs', 'themselves', 'it', 'its', 'itself', 'one', 'oneself'}

def pronoun_person(word):
    word = word.lower()
    if word in first_person:
        return 'First'
    elif word in second_person:
        return 'Second'
    elif word in third_person:
        return 'Third'
    else:
        return None
      
df['Person'] = df['Word'].apply(pronoun_person)

pronouns_df = df[df['Person'].notna()]

pronoun_counts = pronouns_df.groupby(['Song', 'Person', 'Word']).size().reset_index(name='Count')

pronoun_counts_sorted = pronoun_counts.sort_values(['Song', 'Count'], ascending=[True, False])

pronoun_counts_sorted
```

#### Word Structure Analysis:

```{python}
df['Vowel Ratio'] = df['Number of Vowels'] / df['Word Length']

word_stats = df.groupby('Song').agg({
    'Word Length': 'mean',
    'Vowel Ratio': 'mean'
}).reset_index()

word_stats
```

```{python}
print('Summary stats:', '\n')
df.describe()

print('\n', '---------------------------------------------------------------', '\n')

print('10 most common words across all 4 songs:', '\n')
df['Word'].value_counts().head(10)

print('\n', '---------------------------------------------------------------', '\n')

print('Most common pronouns in each song:', '\n')
df[df['Pronoun']].groupby('Song')['Word'].value_counts()
```

### 4. Visualizing

```{python}
colors = ['#E3969F', '#A0C3D9', '#699091']

pronoun_counts_by_person = pronouns_df.groupby(['Song', 'Person']).size().reset_index(name='Count')

pronoun_counts_wide = pronoun_counts_by_person.pivot(index='Song', columns='Person', values='Count').fillna(0)

ax = pronoun_counts_wide.plot(kind='bar', color=colors, stacked=True)
plt.xlabel('Song')
plt.ylabel('Number of Pronouns')
plt.title('Pronoun Use by Person Across Djo Songs')
plt.xticks(rotation=0)  
plt.tight_layout()      
plt.show()
```

```{python}
plt.close('all')

word_length_avg = df.groupby('Song')['Word Length'].mean()

fig, ax = plt.subplots()
ax.bar(word_length_avg.index, word_length_avg.values, color='#A0B1D8')
ax.set_xlabel('Song')
ax.set_ylabel('Average Word Length')
ax.set_title('Average Word Length Across Djo Songs')
plt.xticks(rotation=0)
plt.tight_layout()

plt.show()
```

```{python}
plt.close('all')

vowel_ratio = df.groupby('Song')['Number of Vowels'].sum() / df.groupby('Song')['Word Length'].sum()

fig, ax = plt.subplots()
ax.bar(vowel_ratio.index, vowel_ratio.values, color='#F6C7B3')
ax.set_xlabel('Song')
ax.set_ylabel('Vowel-to-Consonant Ratio')
ax.set_title('Vowel-to-Consonant Ratio Across Djo Songs')
plt.xticks(rotation=0)
plt.tight_layout()

plt.show()
```

```{python}
word_freq = df['Word'].value_counts().to_dict()

wc = WordCloud(width=800, height=400, background_color='white', colormap='tab20').generate_from_frequencies(word_freq)

plt.figure(figsize=(15, 7.5))
plt.imshow(wc, interpolation='bilinear')
plt.axis('off')
plt.title('Most Frequent Words in Djo Lyrics', fontsize=20, pad=20, color='#699091')
plt.show()
```

### 5. Interpretations

My analysis looked at patterns in word choice and sound structure across four Djo songs, focusing on common words, average word length, and vowel-to-consonant ratio. I used functions like df.describe(), value_counts(), and groupby() to generate summary statistics and identify the most frequently used words overall and within each song. The results showed that short, pronoun-based words such as “I,” “you,” and “my” appeared most often, with an average word length of about 3.7 letters and a vowel ratio of roughly 0.43. This suggests a conversational and personal tone in the lyrics, supported by simple and repetitive language. My analysis could be extended by comparing vowel ratios between individual songs, tracking changes in word use by section (i.e. verse, chorus, bridge), or even analyzing the emotional tone of each. For the final project, I also need to refine the pronoun analysis to account for lyrical variants like 'ya' in 'Delete Ya,' which aren’t currently recognized as second-person pronouns.

### 6. Final Steps

```{python}
df = pd.read_csv("hayes_lexie_component2.csv", encoding="utf-8")

df['Overall Frequency'] = df['Word'].map(df['Word'].value_counts())

df['Song Frequency'] = df.groupby(['Song', 'Word'])['Word'].transform('count')

df.to_csv("hayes_lexie_component3.csv", index=False, encoding="utf-8")
```
